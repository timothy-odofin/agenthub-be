# Tool Configuration
# Controls which agent tools are available to the LLM
# Professional configuration-driven approach for open-source extensibility
# Connection details are configured separately in application-external.yaml

tools:
  # Jira Integration Tools
  jira:
    enabled: true
    display:
      title: "Jira Integration"
      description: "Search, create, and manage Jira issues and projects"
      icon: "jira"
      tags: ["project-management", "issue-tracking", "collaboration"]
      example_prompts:
        - "Search for open bugs in project ABC"
        - "Create a new task for implementing feature X"
        - "What are my assigned issues?"
        - "Add a comment to issue KEY-123"
    # All 8 currently implemented Jira tools
    available_tools:
      issues:
        search_jira_issues:
          enabled: true
          description: "Search for JIRA issues using JQL (JIRA Query Language)"
          category: "search"
        create_jira_issue:
          enabled: true
          description: "Create a new JIRA issue with specified details"
          category: "management"
          requires_confirmation: true
          risk_level: "medium"
          confirmation_reason: "Creates a new Jira issue which affects team workflows and notifications"
        get_jira_issue:
          enabled: true
          description: "Get detailed information about a specific JIRA issue"
          category: "retrieval"
        add_jira_comment:
          enabled: true
          description: "Add a comment to an existing JIRA issue (supports plain text and ADF format)"
          category: "collaboration"
          requires_confirmation: true
          risk_level: "low"
          confirmation_reason: "Adds a public comment that notifies team members"
      projects:
        get_jira_projects:
          enabled: true
          description: "List all accessible JIRA projects"
          category: "discovery"
      users:
        search_jira_users:
          enabled: true
          description: "Search for JIRA users by username, email, or display name (useful for mentions)"
          category: "discovery"
        get_all_jira_users:
          enabled: true
          description: "Get a list of all JIRA users with pagination"
          category: "discovery"
        get_jira_project_users:
          enabled: true
          description: "Get users who have access to a specific JIRA project"
          category: "discovery"

  # Confluence Integration Tools
  confluence:
    enabled: true
    display:
      title: "Confluence Wiki"
      description: "Search and retrieve company documentation from Confluence"
      icon: "confluence"
      tags: ["documentation", "knowledge-base", "wiki"]
      example_prompts:
        - "Find documentation about API authentication"
        - "Search for deployment procedures"
        - "What does the wiki say about feature flags?"
        - "Show me pages in the Engineering space"
    available_tools:
      spaces:
        list_confluence_spaces:
          enabled: true
          description: "List all accessible Confluence spaces with their keys and details"
          category: "discovery"
        get_confluence_space:
          enabled: true
          description: "Get detailed information about a specific Confluence space"
          category: "retrieval"
      pages:
        get_confluence_page:
          enabled: true
          description: "Get the full content and metadata of a specific Confluence page by ID"
          category: "retrieval"
        list_pages_in_space:
          enabled: true
          description: "List all pages in a specific Confluence space"
          category: "discovery"
        search_confluence_pages:
          enabled: true
          description: "Search for Confluence pages by text query across titles and content"
          category: "search"
    
  # Vector Store Tools (includes embedded confluence pages)
  vector:
    enabled: true
    display:
      title: "Knowledge Base Search"
      description: "Search embedded knowledge base using AI-powered semantic search"
      icon: "database"
      tags: ["search", "knowledge-base", "semantic-search"]
      example_prompts:
        - "Find information about user authentication"
        - "What do we know about the payment system?"
        - "Search for troubleshooting guides"
    # Only the one tool that is currently implemented
    available_tools:
      search:
        retrieve_information:
          enabled: true
          description: "Semantic search across knowledge base using vector embeddings"
          category: "search"

  # GitHub Integration Tools
  github:
    enabled: true
    display:
      title: "GitHub Integration"
      description: "Search code, issues, pull requests, and repositories"
      icon: "github"
      tags: ["code", "version-control", "collaboration"]
      example_prompts:
        - "Find the implementation of user authentication"
        - "Search for open issues related to performance"
        - "Show me recent pull requests"
        - "What repositories do we have?"
    # Simplified GitHub tools configuration - direct tool name to boolean mapping
    # Tool names match exactly with LangChain GitHubToolkit tool names
    available_tools:
      # Issues Management
      "Get Issues": true
      "Get Issue": true  
      "Comment on Issue": 
        enabled: true
        requires_confirmation: true
        risk_level: "low"
        confirmation_reason: "Adds a public comment to a GitHub issue"
      "Create Issue":
        enabled: true
        requires_confirmation: true
        risk_level: "medium"
        confirmation_reason: "Creates a new GitHub issue that notifies repository watchers"
      
      # Pull Requests
      "List open pull requests (PRs)": true
      "Get Pull Request": true
      "Create Pull Request": 
        enabled: true
        requires_confirmation: true
        risk_level: "high"
        confirmation_reason: "Creates a new pull request which may trigger CI/CD pipelines and notify reviewers"
      "Create review request": true
      "Overview of files included in PR": true
      "List Pull Requests' Files": true
      
      # File Operations
      "Read File": true
      "Update File": 
        enabled: true
        requires_confirmation: true
        risk_level: "high"
        confirmation_reason: "Modifies file content in the repository which may affect functionality"
      "Create File": 
        enabled: false  # Disabled for safety
        requires_confirmation: true
        risk_level: "high"
        confirmation_reason: "Creates a new file in the repository"
      "Delete File": 
        enabled: false  # Disabled for safety
        requires_confirmation: true
        risk_level: "high"
        confirmation_reason: "Permanently deletes a file from the repository"
      
      # Repository Navigation
      "Overview of existing files in Main branch": true
      "Overview of files in current working branch": true
      "Get files from a directory": true
      
      # Search Capabilities  
      "Search issues and pull requests": true
      "Search code": true
      
      # Branch Management
      "List branches in this repository": true
      "Create a new branch": 
        enabled: true
        requires_confirmation: true
        risk_level: "medium"
        confirmation_reason: "Creates a new branch in the repository"
      "Set active branch": 
        enabled: true
        requires_confirmation: true
        risk_level: "medium"
        confirmation_reason: "Changes the active working branch for subsequent operations"

  # Datadog Monitoring and Observability Tools
  datadog:
    enabled: true
    display:
      title: "Datadog Monitoring"
      description: "Query logs, metrics, and monitors for system observability"
      icon: "datadog"
      tags: ["monitoring", "observability", "logs", "metrics"]
      example_prompts:
        - "Search logs for errors in the last hour"
        - "What's the CPU usage for service X?"
        - "Show me active alerts"
        - "Query response time metrics"
    available_tools:
      logs:
        datadog_search_logs:
          enabled: true
          description: "Search Datadog logs for errors, traces, and application behavior"
          category: "observability"
      metrics:
        datadog_query_metrics:
          enabled: true
          description: "Query Datadog metrics for system and application performance"
          category: "observability"
      monitors:
        datadog_list_monitors:
          enabled: true
          description: "List and check status of Datadog monitors"
          category: "observability"

  # Web Content Reading Tools
  web:
    enabled: true
    display:
      title: "Web Documentation Reader"
      description: "Read and search external web documentation and resources"
      icon: "globe"
      tags: ["documentation", "web", "external-resources"]
      example_prompts:
        - "What does the Python docs say about asyncio?"
        - "Search FastAPI documentation for dependency injection"
        - "Read LangChain docs about agents"
        - "Find information on Real Python about decorators"
    cache_ttl: 3600  # Cache web content for 1 hour (in seconds)
    
    # Content chunking configuration
    chunking:
      chunk_size: 1000      # Maximum characters per chunk
      chunk_overlap: 200    # Overlap between chunks to maintain context
    
    available_tools:
      # Static URL tools for frequently accessed documentation
      documentation:
        read_python_docs:
          enabled: true
          url: "https://docs.python.org/3/"
          description: "Search official Python documentation for language features, standard library APIs, and Python programming concepts"
          category: "documentation"
          max_content_length: 50000
        
        read_fastapi_docs:
          enabled: true
          url: "https://fastapi.tiangolo.com/"
          description: "Search FastAPI documentation for web framework patterns, API development, and async request handling"
          category: "documentation"
          max_content_length: 50000
        
        read_langchain_docs:
          enabled: true
          url: "https://python.langchain.com/docs/"
          description: "Search LangChain documentation for LLM integration patterns, chains, agents, and RAG implementations"
          category: "documentation"
          max_content_length: 50000
      
      # Generic URL reader with domain whitelisting
      generic:
        read_web_url:
          enabled: true
          description: "Read and search content from any whitelisted web URL. Useful for accessing external documentation, blogs, and resources not covered by static tools."
          category: "research"
          allowed_domains:
            # Include static tool domains for fallback
            - "docs.python.org"
            - "fastapi.tiangolo.com"
            - "python.langchain.com"
            
            # Additional allowed domains
            - "realpython.com"
            - "stackoverflow.com"
            - "github.com"
            - "docs.github.com"
            
            # Wildcard patterns for organizational domains
            # - "*.company.com"
            # - "*.internal"
          
          max_content_length: 50000  # Maximum 50KB per page
